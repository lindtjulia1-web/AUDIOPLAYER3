<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–¢–≤–æ–π –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä v5.3</title>
    <style>
        :root { --accent: #00d4ff; --bg: #121214; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #e1e1e6; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .sidebar { width: 340px; background: #19191c; padding: 20px; border-right: 1px solid #333; overflow-y: auto; box-sizing: border-box; }
        .sidebar h2 { color: var(--accent); font-size: 14px; margin: 0 0 20px 0; text-transform: uppercase; letter-spacing: 1px; }
        label { display: block; font-size: 10px; color: #888; margin-top: 12px; font-weight: bold; text-transform: uppercase; }
        input, textarea { width: 100%; background: #29292e; border: 1px solid #3e3e42; color: #fff; padding: 8px; border-radius: 6px; margin-top: 4px; box-sizing: border-box; font-size: 13px; }
        .row { display: flex; gap: 8px; align-items: flex-end; }
        .color-group { flex: 1; }
        
        .btn-main { background: var(--accent); color: #000; border: none; padding: 12px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 15px; transition: 0.3s; }
        .btn-main:hover { filter: brightness(1.2); }
        .btn-secondary { background: #3e3e42; color: #fff; border: none; padding: 10px; width: 100%; border-radius: 8px; cursor: pointer; margin-top: 10px; font-size: 12px; }

        /* –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä */
        .preview-area { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #000; position: relative; }
        #iframe-wrap { border-radius: 20px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.7); background: #222; transition: 0.3s; }
        
        /* –ú–æ–¥–∞–ª–∫–∞ —Å –∫–æ–¥–æ–º */
        #code-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #1a1a1d; border: 1px solid var(--accent); padding: 25px; border-radius: 15px; display: none; width: 500px; z-index: 1000; box-shadow: 0 0 50px rgba(0,0,0,0.9); }
        #final-code { width: 100%; height: 180px; background: #000; color: #0f9; font-family: 'Consolas', monospace; font-size: 11px; padding: 10px; border: 1px solid #333; resize: none; margin-top: 10px; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>–ö–û–ù–°–¢–†–£–ö–¢–û–† V5.3</h2>
    
    <label>GitHub Root (–ø–∞–ø–∫–∞ —Å –º—É–∑—ã–∫–æ–π)</label>
    <input type="text" id="gh-root" value="https://lindtjulia1-web.github.io/AUDIOPLAYER2/">
    
    <label>–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (URL)</label>
    <input type="text" id="bg-url" value="https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?q=80&w=1000">

    <div class="row">
        <div class="color-group">
            <label>–¢–µ–∫—Å—Ç</label>
            <input type="color" id="clr-txt" value="#ffffff">
        </div>
        <div class="color-group">
            <label>–ê–∫—Ü–µ–Ω—Ç</label>
            <input type="color" id="clr-acc" value="#00d4ff">
        </div>
    </div>

    <label>–†–∞–∑–º–µ—Ä—ã (–® —Ö –í)</label>
    <div class="row">
        <input type="number" id="p-w" value="600">
        <input type="number" id="p-h" value="250">
    </div>

    <label>–ü–ª–µ–π–ª–∏—Å—Ç (–ò–º—è | —Ñ–∞–π–ª)</label>
    <textarea id="playlist-data" rows="4">Track 01 | 1.mp3
Track 02 | 2.mp3</textarea>

    <button class="btn-main" onclick="updatePreview()">–û–ë–ù–û–í–ò–¢–¨ –ü–õ–ï–ï–†</button>
    <button class="btn-secondary" onclick="showCode()">–°–ö–û–ü–ò–†–û–í–ê–¢–¨ –ö–û–î –î–õ–Ø GENIALLY</button>
</div>

<div class="preview-area">
    <div id="iframe-wrap"><iframe id="p-frame" frameborder="0" style="width:100%; height:100%;"></iframe></div>
</div>

<div id="code-modal">
    <h3 style="margin:0; color:var(--accent);">–ö–æ–¥ –≥–æ—Ç–æ–≤!</h3>
    <p style="font-size:12px; color:#888;">–ù–∞–∂–º–∏ –Ω–∞ –ø–æ–ª–µ, —á—Ç–æ–±—ã –≤—ã–¥–µ–ª–∏—Ç—å –≤—Å—ë:</p>
    <textarea id="final-code" readonly onclick="this.select()"></textarea>
    <button class="btn-main" onclick="document.getElementById('code-modal').style.display='none'">–ó–ê–ö–†–´–¢–¨</button>
</div>

<script>
function generateFullSource() {
    const root = document.getElementById('gh-root').value,
          bg = document.getElementById('bg-url').value,
          txt = document.getElementById('clr-txt').value,
          acc = document.getElementById('clr-acc').value,
          raw = document.getElementById('playlist-data').value.split('\n').filter(l => l.includes('|')),
          list = raw.map(l => { const p = l.split('|'); return {n: p[0].trim(), f: p[1].trim()}; });

    return `<!DOCTYPE html><html><head><meta charset="UTF-8"><style>
        body { margin: 0; padding: 0; height: 100vh; font-family: 'Segoe UI', sans-serif; color: ${txt}; overflow: hidden; background: #000; }
        .player { width: 100%; height: 100%; background: url('${bg}') center/cover no-repeat; display: flex; position: relative; }
        .overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.3); backdrop-filter: blur(6px); z-index: 1; }
        
        .side-vol { position: relative; z-index: 5; width: 60px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px; background: rgba(255,255,255,0.05); border-right: 1px solid rgba(255,255,255,0.1); }
        .vol-slider { writing-mode: bt-lr; -webkit-appearance: slider-vertical; width: 4px; height: 100px; accent-color: ${acc}; cursor: pointer; }
        
        .main-content { flex: 1; z-index: 5; display: flex; flex-direction: column; padding: 25px; box-sizing: border-box; }
        .track-header { display: flex; justify-content: flex-end; align-items: flex-start; text-align: right; margin-bottom: 10px; }
        .track-meta { display: flex; flex-direction: column; }
        .track-name { font-size: 12px; text-transform: uppercase; opacity: 0.7; letter-spacing: 1px; }
        .track-timer { font-size: 38px; font-weight: 800; color: ${acc}; font-family: monospace; line-height: 1; }
        
        .wave-box { flex: 1; display: flex; align-items: center; justify-content: center; gap: 3px; min-height: 60px; }
        .bar { width: 3px; height: 10px; background: ${txt}; border-radius: 2px; opacity: 0.5; transition: 0.15s ease-out; }

        .bottom-nav { display: flex; align-items: center; justify-content: flex-end; gap: 15px; padding-top: 10px; }
        .btn { background: none; border: none; color: ${txt}; cursor: pointer; font-size: 20px; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
        .btn:hover { color: ${acc}; transform: scale(1.1); }
        .btn-play { width: 50px; height: 50px; background: ${txt}; color: #000; border-radius: 50%; font-size: 22px; }
        .btn-play:hover { background: ${acc}; }
    </style></head><body>
    <div class="player">
        <div class="overlay"></div>
        <div class="side-vol">
            <span style="font-size:12px">üîä</span>
            <input type="range" class="vol-slider" min="0" max="1" step="0.01" value="0.5" oninput="a.volume=this.value">
            <span style="font-size:12px">üîà</span>
        </div>
        <div class="main-content">
            <div class="track-header">
                <div class="track-meta">
                    <div id="tn" class="track-name">READY</div>
                    <div id="tm" class="track-timer">00:00</div>
                </div>
            </div>
            <div class="wave-box" id="wb"></div>
            <div class="bottom-nav">
                <button class="btn" onclick="mv(-1)">‚èÆ</button>
                <button class="btn btn-play" id="pb" onclick="tg()">‚ñ∂</button>
                <button class="btn" onclick="mv(1)">‚è≠</button>
            </div>
        </div>
    </div>
    <script>
        const B="${root}", T=${JSON.stringify(list)};
        let ci=0, iP=false; const a=new Audio(); a.volume=0.5;
        const wb=document.getElementById("wb");
        for(
