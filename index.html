<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–¢–≤–æ–π –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä v5.1</title>
    <style>
        :root { --accent: #00d4ff; --bg: #121214; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #e1e1e6; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .sidebar { width: 340px; background: #19191c; padding: 20px; border-right: 1px solid #333; overflow-y: auto; z-index: 10; }
        .sidebar h2 { color: var(--accent); font-size: 16px; margin: 0 0 15px 0; text-transform: uppercase; letter-spacing: 1px; }
        label { display: block; font-size: 10px; color: #888; margin-top: 10px; font-weight: bold; }
        input, textarea { width: 100%; background: #29292e; border: 1px solid #3e3e42; color: #fff; padding: 8px; border-radius: 6px; margin-top: 4px; box-sizing: border-box; font-size: 13px; }
        .row { display: flex; gap: 8px; }
        .btn-gen { background: var(--accent); color: #000; border: none; padding: 12px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 20px; transition: 0.3s; }
        .btn-gen:hover { opacity: 0.8; }

        /* –û–±–ª–∞—Å—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ */
        .preview-area { flex: 1; display: flex; align-items: center; justify-content: center; background: radial-gradient(circle, #222 0%, #000 100%); position: relative; }
        #iframe-wrap { border-radius: 24px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.8); background: #333; }

        /* –û–∫–Ω–æ —Å –∫–æ–¥–æ–º (–≤–º–µ—Å—Ç–æ –ø—Ä–æ–º–ø—Ç–∞) */
        #code-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #1a1a1d; border: 1px solid #444; padding: 20px; border-radius: 15px; display: none; width: 500px; z-index: 1000; box-shadow: 0 0 30px rgba(0,0,0,1); }
        #code-modal h3 { margin: 0 0 10px 0; font-size: 14px; color: var(--accent); }
        #output-code { width: 100%; height: 150px; background: #000; color: #0f9; font-family: monospace; font-size: 11px; padding: 10px; border: 1px solid #333; resize: none; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>–ö–û–ù–°–¢–†–£–ö–¢–û–† V5.1</h2>
    
    <label>–ê–¥—Ä–µ—Å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞</label>
    <input type="text" id="gh-root" value="https://lindtjulia1-web.github.io/AUDIOPLAYER2/">
    
    <label>–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (URL)</label>
    <input type="text" id="bg-img" value="https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?q=80&w=1000&auto=format&fit=crop" oninput="updatePreview()">

    <label>–†–∞–∑–º–µ—Ä—ã (–® —Ö –í)</label>
    <div class="row">
        <input type="number" id="p-w" value="600" oninput="updatePreview()">
        <input type="number" id="p-h" value="250" oninput="updatePreview()">
    </div>
    
    <label>–¶–≤–µ—Ç–∞ (–¢–µ–∫—Å—Ç | –ê–∫—Ü–µ–Ω—Ç)</label>
    <div class="row">
        <input type="color" id="clr-text" value="#ffffff" oninput="updatePreview()">
        <input type="color" id="clr-acc" value="#00d4ff" oninput="updatePreview()">
    </div>

    <label>–ü–ª–µ–π–ª–∏—Å—Ç (–ù–∞–∑–≤–∞–Ω–∏–µ | —Ñ–∞–π–ª)</label>
    <textarea id="playlist-data" rows="4" oninput="updatePreview()">Track 01 | 1.mp3
Track 02 | 2.mp3</textarea>

    <button class="btn-gen" onclick="showCode()">–ü–û–õ–£–ß–ò–¢–¨ –ö–û–î –î–õ–Ø GENIALLY</button>
</div>

<div class="preview-area">
    <div id="iframe-wrap"><div id="iframe-container"></div></div>
</div>

<div id="code-modal">
    <h3>–ö–æ–¥ –≥–æ—Ç–æ–≤! –°–∫–æ–ø–∏—Ä—É–π –µ–≥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é:</h3>
    <textarea id="output-code" readonly onclick="this.select()"></textarea>
    <button class="btn-gen" style="background:#333; color:#fff;" onclick="document.getElementById('code-modal').style.display='none'">–ó–ê–ö–†–´–¢–¨</button>
</div>

<script>
function generatePlayerSource() {
    const root = document.getElementById('gh-root').value,
          bg = document.getElementById('bg-img').value,
          ct = document.getElementById('clr-text').value,
          ca = document.getElementById('clr-acc').value;
    
    const rawList = document.getElementById('playlist-data').value.split('\n').filter(l => l.includes('|'));
    const playlist = rawList.map(l => { const p = l.split('|'); return { n: p[0].trim(), f: p[1].trim() }; });

    return `<!DOCTYPE html><html><head><meta charset="UTF-8"><style>
        body { margin: 0; padding: 0; height: 100vh; display: flex; font-family: 'Segoe UI', sans-serif; overflow: hidden; color: ${ct}; background: #000; }
        .card { width: 100%; height: 100%; background: url('${bg}') center/cover no-repeat; display: flex; position: relative; }
        .card::before { content:''; position:absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.4); backdrop-filter: blur(8px); }
        
        .vol-pane { position: relative; z-index: 2; width: 50px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px; background: rgba(0,0,0,0.2); }
        .v-slider { writing-mode: bt-lr; -webkit-appearance: slider-vertical; width: 4px; height: 100px; accent-color: ${ca}; cursor: pointer; }
        
        .main { flex: 1; z-index: 2; display: flex; flex-direction: column; padding: 25px; position: relative; }
        .info { position: absolute; top: 20px; right: 25px; text-align: right; }
        .now { font-size: 12px; opacity: 0.6; text-transform: uppercase; }
        .time { font-size: 32px; font-weight: bold; color: ${ca}; font-family: monospace; }
        
        .viz { flex: 1; display: flex; align-items: center; justify-content: center; gap: 4px; margin-top: 40px; }
        .bar { width: 5px; height: 15px; background: ${ca}; border-radius: 10px; transition: 0.15s; opacity: 0.7; }

        .footer { display: flex; align-items: center; justify-content: space-between; margin-top: 10px; }
        .track-name { font-size: 14px; font-weight: bold; max-width: 60%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .btns { display: flex; align-items: center; gap: 15px; }
        .b { background: none; border: none; color: ${ct}; cursor: pointer; font-size: 18px; transition: 0.2s; }
        .play { width: 45px; height: 45px; background: ${ct}; color: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; }
        .b:hover { color: ${ca}; transform: scale(1.1); }
        .play:hover { background: ${ca}; }
    </style></head><body>
    <div class="card">
        <div class="vol-pane"><span>üîî</span><input type="range" class="v-slider" min="0" max="1" step="0.01" value="0" oninput="a.volume=this.value"><span>üéµ</span></div>
        <div class="main">
            <div class="info">
                <div id="t-name" class="now">READY</div>
                <div id="clock" class="time">00:00</div>
            </div>
            <div class="viz" id="viz"></div>
            <div class="footer">
                <div class="track-name">Now Playing...</div>
                <div class="btns">
                    <button class="b" onclick="mv(-1)">‚èÆ</button>
                    <button class="b play" id="pB" onclick="tg()">‚ñ∂</button>
                    <button class="b" onclick="mv(1)">‚è≠</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        const B="${root}", T=${JSON.stringify(playlist)};
        let ci=0, iP=false; const a=new Audio(); a.volume=0;
        const viz=document.getElementById("viz");
        for(let i=0; i<35; i++){ let b=document.createElement("div"); b.className="bar"; viz.appendChild(b); }
        
        function ld(i){ ci=i; a.src=B+T[ci].f; document.getElementById("t-name").innerText=T[ci].n; }
        function tg(){ if(iP){ a.pause(); document.getElementById("pB").innerText="‚ñ∂"; } else { a.play(); document.getElementById("pB").innerText="‚è∏"; } iP=!iP; }
        function mv(s){ ci=(ci+s+T.length)%T.length; ld(ci); if(iP) a
